### Построение универсального алгоритма управления дроном

Универсальный алгоритм управления дронами может быть построен на основе таблицы переходов состояний. Каждое состояние описывает определённое поведение дрона, а переходы между состояниями управляются событиями (триггерами), которые определяются внешними или внутренними условиями.

---

### Таблица переходов состояний

| **Текущее состояние** | **Условие перехода (триггер)**                                     | **Следующее состояние** | **Действие**                                   |
|------------------------|-------------------------------------------------------------------|--------------------------|-----------------------------------------------|
| `IDLE`                | Армирование (`flightCheck == True` и `arm_message == True`)       | `ARMING`                | Выполнить `arm()`                            |
| `ARMING`              | Успешное армирование (`arm_state == ARMED`)                      | `TAKEOFF`               | Выполнить `takeoff()`                         |
| `ARMING`              | Ошибка проверки (`flightCheck == False`)                         | `IDLE`                  | Выйти в состояние ожидания                   |
| `TAKEOFF`             | Успешный взлёт (`nav_state == AUTO_TAKEOFF`)                     | `LOITER`                | Перейти в режим удержания позиции            |
| `TAKEOFF`             | Ошибка проверки (`flightCheck == False`)                         | `IDLE`                  | Выйти в состояние ожидания                   |
| `LOITER`              | Команда на Offboard (`nav_state == AUTO_LOITER`)                 | `OFFBOARD`              | Активировать Offboard режим                  |
| `LOITER`              | Команда на посадку                                              | `LANDING`               | Выполнить `land()`                           |
| `OFFBOARD`            | Команда на посадку                                              | `LANDING`               | Выполнить `land()`                           |
| `OFFBOARD`            | Ошибка проверки (`flightCheck == False` или `failsafe == True`) | `IDLE`                  | Деактивировать Offboard                      |
| `LANDING`             | Успешная посадка (`nav_state == AUTO_LAND`)                     | `DISARM`                | Выполнить `disarm()`                         |
| `DISARM`              | Успешное разармирование (`arm_state == STANDBY`)                | `IDLE`                  | Выйти в состояние ожидания                   |
